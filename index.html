import React, { useEffect, useRef } from "react";
import { motion, useAnimation } from "framer-motion";
import { gsap } from "gsap";
import "./styles.css";

function App() {
  const titleControls = useAnimation();
  const imgControls = useAnimation();
  const poemControls = useAnimation();
  const buttonControls = useAnimation();

  useEffect(() => {
    // GSAP Animation for Background
    gsap.from(".background-wave", {
      duration: 5,
      x: -100,
      repeat: -1,
      yoyo: true,
      ease: "power1.inOut",
    });

    // Framer Motion Animations
    titleControls.start({ opacity: 1, y: 0 });
    imgControls.start({ opacity: 1, scale: 1, rotate: 360 });
    poemControls.start({ opacity: 1, x: 0 });
    buttonControls.start({ opacity: 1, y: 0 });
  }, [titleControls, imgControls, poemControls, buttonControls]);

  return (
    <div className="min-h-screen bg-gradient-to-br from-teal-400 to-teal-800 text-white flex flex-col items-center justify-center relative overflow-hidden">
      {/* Background Waves */}
      <div className="background-wave absolute w-200 h-200 bg-teal-300 rounded-full opacity-20 -bottom-20 -left-20"></div>
      <div className="background-wave absolute w-300 h-300 bg-teal-200 rounded-full opacity-20 -top-20 -right-20"></div>

      {/* Title */}
      <motion.h1
        initial={{ opacity: 0, y: -50 }}
        animate={titleControls}
        transition={{ duration: 1 }}
        className="text-5xl font-bold mb-8"
      >
        صديقي العزيز، أنت كنزي الثمين
      </motion.h1>

      {/* Image */}
      <motion.img
        initial={{ opacity: 0, scale: 0.5, rotate: 0 }}
        animate={imgControls}
        transition={{ duration: 1.5, type: "spring" }}
        src="صورة_صديقك.jpg"
        alt="صديقي"
        className="w-48 h-48 rounded-full border-4 border-green-900 shadow-lg"
      />

      {/* Poem */}
      <motion.div
        initial={{ opacity: 0, x: -100 }}
        animate={poemControls}
        transition={{ duration: 2 }}
        className="text-2xl mt-8"
      >
        الصداقة بحرٌ لا ساحلَ لهُ<br />
        والإخوة نورٌ في ظلام الدجى
      </motion.div>

      {/* Message Button */}
      <motion.button
        initial={{ opacity: 0, y: 50 }}
        animate={buttonControls}
        transition={{ duration: 1, delay: 1 }}
        onClick={() => alert("رسالة حب لصديقي!")}
        className="mt-8 px-6 py-3 bg-green-900 text-white rounded-lg shadow-lg hover:bg-green-700 transition-all"
      >
        أرسل رسالة
      </motion.button>

      {/* Reactions */}
      <div className="flex gap-4 mt-8">
        {["❤️", "😂", "🤗"].map((emoji, index) => (
          <motion.div
            key={index}
            whileHover={{ scale: 1.2 }}
            whileTap={{ scale: 0.9 }}
            onClick={() => alert(`تفاعلت بـ ${emoji} مع صديقك!`)}
            className="text-3xl cursor-pointer"
          >
            {emoji}
          </motion.div>
        ))}
      </div>
    </div>
  );
}

export default App;
